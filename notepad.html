<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üìù Bloco de Notas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #121212;
      color: #f1f1f1;
    }

    #noteCard {
      background-color: #1e1e1e !important;
      color: white;
      transition: background 0.3s, color 0.3s;
    }

    .list-group-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .list-group-item.done {
      text-decoration: line-through;
      color: gray;
    }

    .form-control, .form-select, .btn {
      background-color: #2c2c2c;
      color: white;
      border: 1px solid #444;
    }

    .animated-emoji {
      font-size: 2rem;
      animation: bounce 1s ease;
    }

    @keyframes bounce {
      0%   { transform: scale(0.5); opacity: 0; }
      50%  { transform: scale(1.5); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1>üìù Bloco de Notas</h1>
      <button class="btn btn-light" onclick="toggleDarkMode()">‚òÄÔ∏è Modo Claro</button>
    </div>

    <div class="card p-4 shadow" id="noteCard">
      <div class="mb-3">
        <label for="manualDate" class="form-label fw-bold">Data e Hora:</label>
        <input type="datetime-local" id="manualDate" class="form-control" onchange="updateDateManual()">
        <small id="dateDisplay" class="text-muted d-block mt-2"></small>
      </div>

      <div class="input-group mb-3">
        <input type="text" id="taskInput" class="form-control" placeholder="Digite uma tarefa...">
        <button class="btn btn-primary" onclick="addTask()">Adicionar</button>
      </div>

      <div class="mb-3">
        <select class="form-select" id="filter" onchange="filterTasks()">
          <option value="all">Todas</option>
          <option value="done">Conclu√≠das</option>
          <option value="pending">Pendentes</option>
        </select>
      </div>

      <ul id="taskList" class="list-group"></ul>
    </div>

    <div id="emojiBox" class="text-center mt-4" style="height: 50px;"></div>
  </div>

  <script>
    function addTask() {
      const input = document.getElementById('taskInput');
      const taskText = input.value.trim();
      if (!taskText) return;

      const li = document.createElement('li');
      li.className = 'list-group-item';

      const span = document.createElement('span');
      span.textContent = taskText;

      const controls = document.createElement('div');

      const completeBtn = document.createElement('button');
      completeBtn.className = 'btn btn-success btn-sm me-1';
      completeBtn.textContent = '‚úì';
      completeBtn.onclick = () => toggleDone(li);

      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'btn btn-danger btn-sm';
      deleteBtn.textContent = 'üóë';
      deleteBtn.onclick = () => li.remove();

      controls.appendChild(completeBtn);
      controls.appendChild(deleteBtn);

      li.appendChild(span);
      li.appendChild(controls);

      document.getElementById('taskList').appendChild(li);
      input.value = "";
      filterTasks();
    }

    function toggleDone(li) {
      li.classList.toggle('done');
      const emojiBox = document.getElementById('emojiBox');
      emojiBox.innerHTML = '';

      const emoji = document.createElement('div');
      emoji.className = 'animated-emoji';

      if (li.classList.contains('done')) {
        emoji.textContent = 'üéâ Tarefa conclu√≠da!';
      } else {
        emoji.textContent = 'üò¢ Tarefa pendente!';
      }

      emojiBox.appendChild(emoji);
      setTimeout(() => emojiBox.innerHTML = '', 2000);
      filterTasks();
    }

    function filterTasks() {
      const filter = document.getElementById('filter').value;
      const tasks = document.querySelectorAll('#taskList li');

      tasks.forEach(task => {
        const isDone = task.classList.contains('done');
        if (
          filter === 'all' ||
          (filter === 'done' && isDone) ||
          (filter === 'pending' && !isDone)
        ) {
          task.style.display = '';
        } else {
          task.style.display = 'none';
        }
      });
    }

    function toggleDarkMode() {
      const isDark = document.body.style.backgroundColor === 'rgb(18, 18, 18)';
      if (isDark) {
        document.body.style.backgroundColor = '#f8f9fa';
        document.body.style.color = '#000';
        document.getElementById('noteCard').style.backgroundColor = '#fff';
        document.querySelector('.btn-light').textContent = 'üåô Modo Escuro';
      } else {
        document.body.style.backgroundColor = '#121212';
        document.body.style.color = '#f1f1f1';
        document.getElementById('noteCard').style.backgroundColor = '#1e1e1e';
        document.querySelector('.btn-light').textContent = '‚òÄÔ∏è Modo Claro';
      }
    }

    function updateDateManual() {
      const input = document.getElementById('manualDate').value;
      const output = document.getElementById('dateDisplay');
      if (input) {
        const formatted = new Date(input).toLocaleString('pt-BR');
        output.textContent = `Data selecionada: ${formatted}`;
      } else {
        output.textContent = '';
      }
    }

    // Inicializa data com o hor√°rio atual
    window.onload = () => {
      const now = new Date();
      const localDateTime = now.toISOString().slice(0,16);
      document.getElementById('manualDate').value = localDateTime;
      updateDateManual();
    };
  </script>
</body>
</html>
